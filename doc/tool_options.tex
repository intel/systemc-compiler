
\subsection{Tool options and defines}\label{section:tool_options}

ICSC translation flow is based on CMake build system. ICSC provides {\tt svc\_target} function in {\tt SVC} package to be used in {\tt CMakeLists.txt} file.
ICSC has multiple options, which can be specified as {\tt svc\_target} parameters. These options given in Table~\ref{tab:tool_opts}.


\begin{table}
\begin{tabular}{|l|l|}
\hline
Tool option & Description \\
\hline
{\tt ELAB\_TOP} & Design top module name, it needs to be specified if \\
                & top module is instantiated outside of {\tt sc\_main()} \\
                & or if there are more than one modules in {\tt sc\_main()} \\
{\tt MODULE\_PREFIX} &  Module prefix string, no prefix if not specified, prefix \\         
                & applied for every module excluding SV intrinsic, \\
                & see~\ref{section:black_box} \\
{\tt UNSIGNED}  & Unsigned mode for designs with unsigned arithmetic only, \\
                & see~\ref{section:unsigned_mode} \\
{\tt INIT\_LOCAL\_VARS} & Initialize non-initialized process local variables \\
                & with 0 to avoid latches, that related to CPP data \\
                & types only, SC data types always initialized with 0 \\
{\tt INIT\_RESET\_LOCAL\_VARS} & Initialize non-initialized clocked thread local \\
                & variables declared in reset section with zero, \\
                & that related to CPP data types only, \\
                & SC data types always initialized with 0 \\
{\tt INIT\_LOCAL\_REGS} & Initialize local variables declared in CTHREAD \\
                & main loop body in reset section with zero, \\
                & that related to the variables which become registers \\
{\tt PORT\_MAP\_GENERATE} & Generate port map file and top module wrapper with \\
                & flatten port arrays, port map file used for SC/SV \\
                & mixed language simulation, top module wrapper used for \\
                & logic synthesis tools which do not support unpacked \\
                & port array in top module interface \\
{\tt NO\_SVA\_GENERATE} & Do not generate SVA from immediate and temporal \\ 
                & SystemC assertions, SVA are generated by default, see~\ref{section:port_map} \\
{\tt NO\_REMOVE\_EXTRA\_CODE} & Do not remove unused variable and unused code, \\ 
                & normally such code is removed to improve readability \\
\hline
\end{tabular}
\caption{{\tt svc\_target} parameters}
\label{tab:tool_opts}
\end{table}

ICSC tool provides {\tt \_\_SC\_TOOL\_\_} define for input SystemC project translation. This define used in temporal assertions and other ICSC library modules to have different behavior for simulation and SV generation. {\tt \_\_SC\_TOOL\_\_} can also be used in the project code to hide pieces of code which are not intended for translation to SystemVerilog.

To completely disable SystemC temporal assertion macro {\tt SCT\_ASSERT\_OFF} can be defined. That allows to hide all assertion specific code to meet SystemC synthesizable standard requirements. {\tt SCT\_ASSERT\_OFF} is required if the SystemC design is passed through a tool which includes its own (not patched) SystemC library.

\subsubsection{Unsigned mode}\label{section:unsigned_mode}

Unsigned mode is intended for designs with unsigned arithmetic only. That means all variables and constants types are unsigned, all expressions are evaluated as non-negative.

In this mode variables and constants types as well as expressions types are checked to be unsigned. C99 types {\tt uint8\_t} and {\tt uint16\_t} (declared in {\tt <cstdint>}) are not recommended to use in this mode as they leads to false warnings. 

Literals could be signed and unsigned (with suffix {\tt U}) in all operations except shifts. In shift expressions both arguments, including literals, should be unsigned.

\begin{lstlisting}[style=mycpp]
int i;                    // Warning, signed type variable  
unsigned u = 1;     
unsigned long ul = 2
sc_uint<12> x = 3;
sc_int<12> y;             // Warning, signed type variable 
sc_biguint<32> bx = 4;
uint8_t z;                
const unsigned N = 42;
ul = u + 1; 
ul = 1 << x;              // Warning, signed literal in shift 
ul = 1U << x;           
ul = x + z;               // False warning for uint8_t
\end{lstlisting}


\subsubsection{Generate port map file}\label{section:port_map}

Generate port map file and top module wrapper with flatten port arrays, port map file used for SystemC/SystemVerilog mixed language simulation by a vendor simulation tool. With this option, design top module should use bool type for 1bit values (not {\tt sc\_uint<1>}) and {\tt sct\_uint/sct\_int} elsewhere. See the port map generation example in {\tt examples/portmap} folder.
