//==============================================================================
//
// The code is generated by Intel Compiler for SystemC, version 1.6.20
// see more information at https://github.com/intel/systemc-compiler
//
//==============================================================================

//==============================================================================
//
// Module: B_top ()
//
module B_top // "b_mod"
(
);

// Variables generated for SystemC signals
logic a;
logic b;
logic clk;
logic nrst;


//------------------------------------------------------------------------------
// Child module instances

A a_mod
(
  .clk(clk),
  .nrst(nrst),
  .a(a),
  .b(b)
);

endmodule



//==============================================================================
//
// Module: A (test_const_prop.cpp:925:5)
//
module A // "b_mod.a_mod"
(
    input logic clk,
    input logic nrst,
    input logic a,
    output logic b
);

// Variables generated for SystemC signals
logic c;
logic arr1[3];
logic arr3[3];
logic port_req[3];
logic port_oper[3];
logic [1:0] rr_first_indx;
logic [1:0] port_bindx[3];

// Local parameters generated for C++ constants
localparam logic [31:0] useWriteResp0 = 1;
localparam logic [31:0] useWriteResp1 = 1;
localparam logic [31:0] CTRL_NUM = '0;
localparam logic [31:0] BLOCK_NUM = 3;
localparam logic [31:0] PORT_NUM = 3;

//------------------------------------------------------------------------------
// Method process: complex_if_level (test_const_prop.cpp:95:5) 

always_comb 
begin : complex_if_level     // test_const_prop.cpp:95:5
    integer k;
    integer m;
    integer n;
    integer aa;
    integer bb;
    if (|k)
    begin
        if (|m)
        begin
            if (|n)
            begin
                if (k > n)
                begin
                    aa = 0;
                end
            end else begin
                if (1)
                begin
                    bb = 1;
                end
            end
        end
    end
end

//------------------------------------------------------------------------------
// Method process: mstrResponseMuxProc (test_const_prop.cpp:120:5) 

always_comb 
begin : mstrResponseMuxProc     // test_const_prop.cpp:120:5
    integer k;
    integer m;
    integer n;
    integer i;
    i = a;
    if ((arr1[i] && 1) || arr3[i])
    begin
        m = 1;
    end
end

//------------------------------------------------------------------------------
// Method process: NoReturnProc (test_const_prop.cpp:147:5) 

always_comb 
begin : NoReturnProc     // test_const_prop.cpp:147:5
    integer k;
    integer m;
    integer n;
    if (a)
    begin
    end
end

//------------------------------------------------------------------------------
// Method process: NoReturnProc2 (test_const_prop.cpp:157:5) 

always_comb 
begin : NoReturnProc2     // test_const_prop.cpp:157:5
    logic TMP_0;
    integer unsigned portId;
    portId = a;
    // Call useWriteResp() begin
    case (portId)
    0 : begin
        TMP_0 = |useWriteResp0;
    end
    1 : begin
        TMP_0 = |useWriteResp1;
    end
    default : begin
        TMP_0 = |useWriteResp0;
    end
    endcase
    // Call useWriteResp() end
end

//------------------------------------------------------------------------------
// Method process: not_test (test_const_prop.cpp:164:5) 

always_comb 
begin : not_test     // test_const_prop.cpp:164:5
    logic [2:0] x;
    logic [2:0] y;
    logic b_1;
    x = 3;
    y = 64'(~x);
    b_1 = x == y;
end

//------------------------------------------------------------------------------
// Method process: intrControlProc (test_const_prop.cpp:484:5) 

always_comb 
begin : intrControlProc     // test_const_prop.cpp:484:5
    logic b_1;
    b_1 = 0;
end

//------------------------------------------------------------------------------
// Method process: chooseRequestProc (test_const_prop.cpp:494:5) 
// Empty process, no code generated 

//------------------------------------------------------------------------------
// Method process: ackProc2R2Wcache4 (test_const_prop.cpp:538:5) 

always_comb 
begin : ackProc2R2Wcache4     // test_const_prop.cpp:538:5
    logic readFirstAccess_flat[3];
    logic readSecndAccess_flat[3];
    logic writeFirstAccess_flat[3];
    logic writeSecndAccess_flat[3];
    logic [1:0] TMP_0;
    logic [1:0] portIndx;
    logic [1:0] TMP_2;
    integer unsigned iter;
    logic [1:0] portIndx_1;
    logic [1:0] blockIndx;
    logic accessPermit;
    for (integer i = 0; i < BLOCK_NUM; i++)
    begin
        readFirstAccess_flat[i] = a;
        readSecndAccess_flat[i] = 0;
        writeFirstAccess_flat[i] = a;
        writeSecndAccess_flat[i] = 0;
    end
    // Call getFirstPortIndx() begin
    TMP_0 = rr_first_indx;
    // Call getFirstPortIndx() end
    portIndx = TMP_0;
    for (integer unsigned i_1 = 1; i_1 < PORT_NUM; i_1++)
    begin
        iter = i_1; portIndx_1 = portIndx;
        // Call getNextPortIndex() begin
        if (1)
        begin
            if (0)
            begin
            end else begin
                if (iter == 1)
                begin
                    TMP_2 = rr_first_indx;
                end else begin
                    TMP_2 = (portIndx_1 == 0) ? 2 : ((portIndx_1 == PORT_NUM - 1) ? 0 : (portIndx_1 + 1));
                end
            end
        end
        // Call getNextPortIndex() end
        portIndx = TMP_2;
        blockIndx = port_bindx[portIndx];
        accessPermit = port_req[portIndx];
        if (!port_oper[portIndx])
        begin
            if (!readFirstAccess_flat[blockIndx])
            begin
                readFirstAccess_flat[blockIndx] = accessPermit;
            end else begin
                if (!readSecndAccess_flat[blockIndx])
                begin
                    readSecndAccess_flat[blockIndx] = accessPermit;
                end else begin
                    accessPermit = 0;
                end
            end
        end else begin
            if (!writeFirstAccess_flat[blockIndx])
            begin
                writeFirstAccess_flat[blockIndx] = accessPermit;
            end else begin
                if (!writeSecndAccess_flat[blockIndx])
                begin
                    writeSecndAccess_flat[blockIndx] = accessPermit;
                end else begin
                    accessPermit = 0;
                end
            end
        end
    end
end

//------------------------------------------------------------------------------
// Method process: simple_if1 (test_const_prop.cpp:588:5) 

always_comb 
begin : simple_if1     // test_const_prop.cpp:588:5
    integer i;
    i = 1;
    if (1)
    begin
        i = 2;
    end
end

//------------------------------------------------------------------------------
// Method process: simple_if2 (test_const_prop.cpp:599:5) 

always_comb 
begin : simple_if2     // test_const_prop.cpp:599:5
    integer i;
    integer m;
    i = 1;
    m = i + 1;
    if (a)
    begin
        if (0)
        begin
        end else begin
            i = 3;
        end
    end else begin
        if (1)
        begin
            i = 4;
        end
    end
end

//------------------------------------------------------------------------------
// Method process: if_in_func1 (test_const_prop.cpp:627:5) 

always_comb 
begin : if_in_func1     // test_const_prop.cpp:627:5
    integer i;
    integer j;
    i = 1;
    if (0)
    begin
    end
    // Call f1() begin
    j = 1;
    if (1)
    begin
        j = 2;
    end
    // Call f1() end
end

//------------------------------------------------------------------------------
// Method process: if_in_func2 (test_const_prop.cpp:641:5) 

always_comb 
begin : if_in_func2     // test_const_prop.cpp:641:5
    integer m;
    // Call f2() begin
    m = 3;
    // Call f2() end
end

//------------------------------------------------------------------------------
// Method process: if_in_func3 (test_const_prop.cpp:653:5) 

always_comb 
begin : if_in_func3     // test_const_prop.cpp:653:5
    integer m;
    integer m_1;
    integer ll;
    m = 4;
    // Call f3() begin
    if (m_1 == 4)
    begin
        ll = 1;
    end
    // Call f3() end
end

//------------------------------------------------------------------------------
// Method process: const_param_func (test_const_prop.cpp:667:5) 

always_comb 
begin : const_param_func     // test_const_prop.cpp:667:5
    integer unsigned val;
    val = 1;
    // Call f4() begin
    // Call f4_() begin
    val++;
    // Call f4_() end
    // Call f4() end
end

//------------------------------------------------------------------------------
// Method process: if_in_func5 (test_const_prop.cpp:676:5) 

always_comb 
begin : if_in_func5     // test_const_prop.cpp:676:5
    integer i;
    i = 5;    // Call of f5()
    if (1)
    begin
    end
end

//------------------------------------------------------------------------------
// Method process: simple_switch1 (test_const_prop.cpp:683:5) 

always_comb 
begin : simple_switch1     // test_const_prop.cpp:683:5
    integer i;
    i = 2;
    case (2)
    2 : begin
        i = 3;
    end
    endcase
end

//------------------------------------------------------------------------------
// Method process: simple_switch2 (test_const_prop.cpp:694:5) 

always_comb 
begin : simple_switch2     // test_const_prop.cpp:694:5
    integer i;
    i = a;
    case (i)
    1 : begin
        i = 2;
    end
    2 : begin
        i = 3;
    end
    default : begin
    end
    endcase
end

//------------------------------------------------------------------------------
// Method process: simple_switch3 (test_const_prop.cpp:704:5) 

always_comb 
begin : simple_switch3     // test_const_prop.cpp:704:5
    integer i;
    i = 3;
    case (3)
    default : begin
        i = 4;
    end
    endcase
end

//------------------------------------------------------------------------------
// Method process: simple_binary1 (test_const_prop.cpp:715:5) 

always_comb 
begin : simple_binary1     // test_const_prop.cpp:715:5
    integer i;
    integer m;
    i = 1;
    if (0)
    begin
    end
    if (1)
    begin
        m = 3;
    end
end

//------------------------------------------------------------------------------
// Method process: simple_binary2 (test_const_prop.cpp:728:5) 

always_comb 
begin : simple_binary2     // test_const_prop.cpp:728:5
    integer i;
    integer m;
    i = 0;
    m = -2'sd1;
    if (1)
    begin
        m = 0;
    end
    if (0)
    begin
    end
    if (1 && a)
    begin
        m = 2;
    end
    if ((i == 1 || i == 0) && a)
    begin
        m = 3;
    end
    if ((i == 1 || a) && c)
    begin
        m = 4;
    end
    if (1 && c)
    begin
        m = 5;
    end
    if ((a || i == 0) && c)
    begin
        m = 6;
    end
    if ((a || i == 1) && c)
    begin
        m = 7;
    end
end

//------------------------------------------------------------------------------
// Method process: simple_binary3 (test_const_prop.cpp:766:5) 

always_comb 
begin : simple_binary3     // test_const_prop.cpp:766:5
    integer i;
    integer m;
    i = 0;
    if (0)
    begin
    end
    if ((i == 0 && i == 1) || a)
    begin
        m = 2;
    end
    if ((i == 0 && a) || c)
    begin
        m = 3;
    end
    if (0 || c)
    begin
        m = 4;
    end
    if ((i == 0 && a) && c)
    begin
        m = 5;
    end
end

//------------------------------------------------------------------------------
// Method process: simple_cond1 (test_const_prop.cpp:791:5) 

always_comb 
begin : simple_cond1     // test_const_prop.cpp:791:5
    integer i;
    integer m;
    i = 1;
    m = 2;
end

//------------------------------------------------------------------------------
// Method process: double_if1 (test_const_prop.cpp:177:5) 

always_comb 
begin : double_if1     // test_const_prop.cpp:177:5
    integer k;
    integer m;
    integer n;
    if (a)
    begin
        if (b)
        begin
            m = 1;
        end else begin
            m = 2;
        end
    end else begin
        if (b)
        begin
            m = 3;
        end else begin
            m = 4;
        end
    end
    m = 0;
end

//------------------------------------------------------------------------------
// Method process: double_if2 (test_const_prop.cpp:198:5) 

always_comb 
begin : double_if2     // test_const_prop.cpp:198:5
    integer k;
    integer m;
    integer n;
    if (a)
    begin
        if (b)
        begin
            m = 1;
        end else begin
            m = 2;
        end
    end
    m = 0;
end

//------------------------------------------------------------------------------
// Method process: double_if3 (test_const_prop.cpp:213:5) 

always_comb 
begin : double_if3     // test_const_prop.cpp:213:5
    integer k;
    integer m;
    integer n;
    if (a)
    begin
        if (b)
        begin
            m = 1;
        end else begin
            m = 2;
        end
    end else begin
        if (b)
        begin
            m = 3;
        end
    end
    m = 0;
end

//------------------------------------------------------------------------------
// Method process: double_if4 (test_const_prop.cpp:232:5) 

always_comb 
begin : double_if4     // test_const_prop.cpp:232:5
    integer k;
    integer m;
    integer n;
    if (a)
    begin
        if (b)
        begin
            m = 1;
        end else begin
            if (c)
            begin
                m = 2;
            end else begin
                m = 3;
            end
        end
    end else begin
        if (b)
        begin
            m = 4;
        end else begin
            if (c)
            begin
                m = 5;
            end else begin
                m = 6;
            end
        end
    end
    m = 0;
end

//------------------------------------------------------------------------------
// Method process: double_if5 (test_const_prop.cpp:263:5) 

always_comb 
begin : double_if5     // test_const_prop.cpp:263:5
    integer k;
    integer m;
    integer n;
    if (a)
    begin
        if (a)
        begin
            if (b)
            begin
                m = 1;
            end else begin
                if (c)
                begin
                    if (1)
                    begin
                        m = 5;    // Call of f()
                    end
                end
            end
        end
    end
end

//------------------------------------------------------------------------------
// Method process: double_if6 (test_const_prop.cpp:284:5) 

always_comb 
begin : double_if6     // test_const_prop.cpp:284:5
    integer k;
    integer m;
    integer n;
    if (a)
    begin
        if (b)
        begin
            m = 1;
        end else begin
            if (c)
            begin
                m = 2;
            end else begin
                m = 3;
            end
        end
    end else begin
        if (b)
        begin
            if (c)
            begin
                m = 4;
            end else begin
                m = 5;
            end
        end else begin
            if (c)
            begin
                m = 6;
            end else begin
                m = 7;
            end
        end
    end
end

//------------------------------------------------------------------------------
// Method process: seq_if (test_const_prop.cpp:459:5) 

always_comb 
begin : seq_if     // test_const_prop.cpp:459:5
    integer k;
    integer m;
    integer n;
    if (a)
    begin
        m = 1;
    end else begin
        if (b)
        begin
            m = 2;
        end else begin
            if (c)
            begin
                m = 3;
            end else begin
                m = 4;
            end
        end
    end
    m = 0;
end

//------------------------------------------------------------------------------
// Method process: double_if_for1 (test_const_prop.cpp:317:5) 

always_comb 
begin : double_if_for1     // test_const_prop.cpp:317:5
    integer k;
    integer m;
    integer n;
    if (a)
    begin
        if (b)
        begin
            for (integer i = 0; i < 2; i++)
            begin
            end
        end else begin
            if (c)
            begin
                m = 2;
            end else begin
                m = 3;
            end
        end
    end else begin
        if (b)
        begin
            m = 4;
        end else begin
            if (c)
            begin
                for (integer i_1 = 0; i_1 < 2; i_1++)
                begin
                    if (a)
                    begin
                        break;
                    end
                end
            end else begin
                m = 6;
            end
        end
    end
    m = 0;
end

//------------------------------------------------------------------------------
// Method process: double_if_for2 (test_const_prop.cpp:347:5) 

always_comb 
begin : double_if_for2     // test_const_prop.cpp:347:5
    integer k;
    integer m;
    integer n;
    if (a)
    begin
        if (b)
        begin
            for (integer i = 0; i < 2; i++)
            begin
                if (c)
                begin
                    m = 1;
                end
            end
        end else begin
            if (c)
            begin
                m = 2;
            end else begin
                m = 3;
            end
        end
    end else begin
        if (b)
        begin
            m = 4;
        end else begin
            if (c)
            begin
                for (integer i_1 = 0; i_1 < 2; i_1++)
                begin
                    if (c)
                    begin
                        m = 1;
                    end else begin
                        m = 2;
                    end
                end
            end else begin
                m = 6;
                if (c)
                begin
                    m = 1;
                end else begin
                    m = 2;
                end
            end
        end
    end
    m = 0;
end

//------------------------------------------------------------------------------
// Method process: double_if_while (test_const_prop.cpp:389:5) 

always_comb 
begin : double_if_while     // test_const_prop.cpp:389:5
    integer k;
    integer m;
    integer n;
    integer i;
    integer i_1;
    integer j;
    if (a)
    begin
        i = 0;
        if (b)
        begin
            while (i < 2)
            begin
                i++;
            end
        end else begin
            if (c)
            begin
                m = 2;
            end else begin
                m = 3;
            end
        end
    end else begin
        i_1 = 0;
        while (i_1 < 2)
        begin
            if (b)
            begin
                m = 4;
            end else begin
                j = 1;
                while (j < 3)
                begin
                    j++;
                    if (c)
                    begin
                        break;
                    end
                end
            end
            i_1++;
        end
        if (c)
        begin
            for (integer i_2 = 0; i_2 < 2; i_2++)
            begin
                if (c)
                begin
                    m = 1;
                end else begin
                    m = 2;
                end
            end
        end
    end
    m = 0;
end

//------------------------------------------------------------------------------
// Method process: double_if_break (test_const_prop.cpp:433:5) 

always_comb 
begin : double_if_break     // test_const_prop.cpp:433:5
    integer k;
    integer m;
    integer n;
    for (integer i = 0; i < 2; i++)
    begin
        if (a)
        begin
            m = 1;
            if (b)
            begin
                m = 2;
                break;
            end
            break;
        end
    end
end

//------------------------------------------------------------------------------
// Method process: false_if_break (test_const_prop.cpp:449:5) 

always_comb 
begin : false_if_break     // test_const_prop.cpp:449:5
    for (integer i = 0; i < 3; ++i)
    begin
        if (0)
        begin
        end
    end
end

//------------------------------------------------------------------------------
// Method process: multiple_calls1 (test_const_prop.cpp:832:5) 

always_comb 
begin : multiple_calls1     // test_const_prop.cpp:832:5
    integer k;
    if (a)
    begin
        // Call g() begin
        k = 0;
        // Call g() end
    end
    // Call g() begin
    k = 0;
    // Call g() end
end

//------------------------------------------------------------------------------
// Method process: multiple_calls2 (test_const_prop.cpp:841:5) 

always_comb 
begin : multiple_calls2     // test_const_prop.cpp:841:5
    integer k;
    // Call g() begin
    k = 0;
    // Call g() end
    if (a)
    begin
        // Call g() begin
        k = 0;
        // Call g() end
    end
end

//------------------------------------------------------------------------------
// Method process: local_array_if (test_const_prop.cpp:807:5) 

always_comb 
begin : local_array_if     // test_const_prop.cpp:807:5
    logic arr[3];
    if (a)
    begin
    end
end

//------------------------------------------------------------------------------
// Clocked THREAD: local_array (test_const_prop.cpp:814:5) 

// Next-state combinational logic
always_comb begin : local_array_comb     // test_const_prop.cpp:814:5
    local_array_func;
end
function void local_array_func;
    logic arr[3];
endfunction

// Synchronous register update
always_ff @(posedge clk or negedge nrst) 
begin : local_array_ff
    if ( ~nrst ) begin
    end
    else begin
    end
end

//------------------------------------------------------------------------------
// Method process: return_const_in_if (test_const_prop.cpp:859:5) 

always_comb 
begin : return_const_in_if     // test_const_prop.cpp:859:5
    integer i;
    integer ll;
    i = a;
    if (i < 2)
    begin
        ll = 1;
    end
end

//------------------------------------------------------------------------------
// Method process: return_const_in_for (test_const_prop.cpp:866:5) 

always_comb 
begin : return_const_in_for     // test_const_prop.cpp:866:5
    integer x;
    integer N;
    x = 0;
    N = 2;    // Call of getConst()
    for (integer i = 0; i < N; ++i)
    begin
        x++;
    end
end

endmodule


